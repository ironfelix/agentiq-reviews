# AgentIQ ‚Äî –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Claude Code

## Cross-model Sync (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
- –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –ª—é–±–æ–π –∑–∞–¥–∞—á–∏ –ø—Ä–æ—á–∏—Ç–∞–π **`CODEX.md`**.
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–ª—é—á–µ–≤—ã—Ö –ø—Ä–∞–≤–∏–ª —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–π **`CLAUDE.md`** –∏ **`CODEX.md`**.

## Documentation Policy (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –ø–æ –ø—É—Ç—è–º: –≤ —ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ª–µ–∂–∏—Ç –≤ `docs/` (–≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è).

1. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `docs/` –∏ —Å–≤–æ–¥–∏—Ç—Å—è –≤:
- `docs/docs-home.html` (—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç–∞–ª: –Ω–∞–≤–∏–≥–∞—Ü–∏—è + —Å—Ç–∞—Ç—É—Å—ã + –∫–∞—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π)
- `docs/INDEX.md` (Markdown-–∏–Ω–¥–µ–∫—Å)

2. **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –õ–Æ–ë–û–ì–û –Ω–æ–≤–æ–≥–æ .md —Ñ–∞–π–ª–∞ –≤ `docs/` ‚Äî –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:**
   - –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –≤ `docs/docs-home.html` (–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Å–µ–∫—Ü–∏—é + pill-—Å—Å—ã–ª–∫–∞ –µ—Å–ª–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ)
   - –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –≤ `docs/INDEX.md`
   - –í –Ω–∞—á–∞–ª–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞: `Last updated:` –∏ `Status:`
   - –ï—Å–ª–∏ —ç—Ç–æ –≥–∏–ø–æ—Ç–µ–∑–∞: —è–≤–Ω–æ –ø–∏—Å–∞—Ç—å "—ç—Ç–æ –ø–ª–∞–Ω, –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ"
   - –ï—Å–ª–∏ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: –¥–∞–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ "–∏—Å—Ç–∏–Ω–Ω—ã–µ" —Ñ–∞–π–ª—ã/—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã/—Ç–∞–±–ª–∏—Ü—ã

3. **–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
   - –û–±–Ω–æ–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ docs (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –û–±–Ω–æ–≤–∏—Ç—å `Last updated:` –≤ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö
   - –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ execution log –µ—Å–ª–∏ –∫—Ä—É–ø–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ

4. Execution log –ø–æ Unified Communications –¥–µ—Ä–∂–∞—Ç—å –≤:
- `docs/product/UNIFIED_COMM_PLAN_V3_WB_FIRST.md`

5. **Changelog ‚Äî –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–Ω–∞—á–∏–º–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û):**
   - Source: `docs/CHANGELOG_HUMAN.md` ‚Üí —Ä–µ–Ω–¥–µ—Ä –≤ `docs/CHANGELOG.html` ‚Üí –¥–µ–ø–ª–æ–π –Ω–∞ VPS
   - –ü–∏—Å–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ **—Ä–µ–∞–ª—å–Ω–æ –∑–∞–ª–∏—Ç–æ** –≤ –∫–æ–¥ ‚Äî –Ω–µ –ø–ª–∞–Ω—ã, –Ω–µ "—Å–æ–±–∏—Ä–∞–µ–º—Å—è"
   - –Ø–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "–ê–≤—Ç–æ-–æ—Ç–≤–µ—Ç—ã: —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞–Ω–∞–ª–∞–º" –≤–º–µ—Å—Ç–æ "feat: auto_response_channels filter"
   - –ö–æ–º–∞–Ω–¥–∞ –¥–µ–ø–ª–æ—è:
     ```bash
     scp -i ~/Downloads/ubuntu-STD3-2-4-20GB-snQXiBJ3_Ilyin.pem \
       docs/CHANGELOG.html docs/CHANGELOG_HUMAN.md \
       ubuntu@79.137.175.164:/tmp/ && \
     ssh -i ~/Downloads/ubuntu-STD3-2-4-20GB-snQXiBJ3_Ilyin.pem ubuntu@79.137.175.164 \
       "sudo cp /tmp/CHANGELOG.html /tmp/CHANGELOG_HUMAN.md /var/www/agentiq/"
     ```
   - –§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Å–∏ –≤ CHANGELOG_HUMAN.md: `## YYYY-MM-DD` ‚Üí `### –ö–∞—Ç–µ–≥–æ—Ä–∏—è` ‚Üí `- –ø—É–Ω–∫—Ç`
   - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: `–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏`, `–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è`, `–°—Ç–∞–ª–æ –±—ã—Å—Ç—Ä–µ–µ`, `–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å`

## 1. –ü–ï–†–ï–î –õ–Æ–ë–û–ô –†–ê–ë–û–¢–û–ô ‚Äî –ø—Ä–æ—á–∏—Ç–∞–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

### –û–±—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞
- **`CODEX.md`** ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Codex –∏ –ø—Ä–∞–≤–∏–ª–∞ –º–µ–∂–º–æ–¥–µ–ª—å–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **`docs/reviews/PROJECT_SUMMARY.md`** ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, —Ñ–∞–π–ª—ã, quickstart, API

### –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –æ—Ç–≤–µ—Ç–∞–º–∏ –Ω–∞ –æ—Ç–∑—ã–≤—ã / communication analysis
- **`docs/reviews/RESPONSE_GUARDRAILS.md`** ‚Äî banned phrases, —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤
- **`scripts/llm_analyzer.py:608-700`** ‚Äî COMM_SYSTEM –ø—Ä–æ–º–ø—Ç + JSON —Ñ–æ—Ä–º–∞—Ç
- **`scripts/llm_analyzer.py:478-519`** ‚Äî GUARDRAILS –∫–æ–Ω—Ñ–∏–≥ (banned phrases, –ª–∏–º–∏—Ç—ã)
- **`docs/reviews/QUALITY_SCORE_FORMULA.md`** ‚Äî —Ñ–æ—Ä–º—É–ª–∞ quality_score (1-10)

### –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –æ—Ç–∑—ã–≤–æ–≤
- **`docs/reviews/reasoning-rules.md`** ‚Äî –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è, –ø–æ—Ä–æ–≥–∏, –ø—Ä–∏–º–µ—Ä—ã
- **`docs/reviews/CARD_FORMAT.md`** ‚Äî —Ñ–æ—Ä–º–∞—Ç –∫–∞—Ä—Ç–æ—á–µ–∫ –æ—Ç—á—ë—Ç–∞

### –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Chat Center
- **`docs/chat-center/chat-center-real-data.html`** ‚Äî –≠–¢–ê–õ–û–ù –¥–∏–∑–∞–π–Ω–∞ (HTML + 1110 —Å—Ç—Ä–æ–∫ CSS)
- **`docs/chat-center/WB_CHAT_API_RESEARCH.md`** ‚Äî –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ WB Chat API
- –ü—Ä–æ—Ç–æ—Ç–∏–ø—ã: `docs/prototypes/chat-center-final.html`
- **`docs/prototypes/app-screens-v3-ru.html`** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π source of truth –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ app-flow (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

### Frontend Design Contract (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
- –î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–≥–æ `docs/prototypes/app-screens-v3-ru.html`.
- –ü—Ä–∏ –æ–∂–∏–≤–ª–µ–Ω–∏–∏ —Å–µ—Ä–≤–∏—Å–∞ (API, sync, —Å–æ—Å—Ç–æ—è–Ω–∏–µ) –Ω–µ –º–µ–Ω—è—Ç—å —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω, –∫–æ–º–ø–æ–∑–∏—Ü–∏—é –∏ UX-–ø–∞—Ç—Ç–µ—Ä–Ω—ã.
- –î–æ–ø—É—Å—Ç–∏–º—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏–≤—è–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π (loading/error/empty) –±–µ–∑ —Ä–µ–¥–∏–∑–∞–π–Ω–∞ —ç–∫—Ä–∞–Ω–æ–≤.

### –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ª–µ–Ω–¥–∏–Ω–≥–æ–º
- **`docs/prototypes/landing.html`** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π source —Ñ–∞–π–ª (~2050 —Å—Ç—Ä–æ–∫)
- GitHub Pages: `docs/prototypes/landing.html` (–ø—É—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)

---

## 2. –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞ ‚Äî –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –°–û–ë–õ–Æ–î–ê–¢–¨

### Reviews App (—Ç—ë–º–Ω–∞—è —Ç–µ–º–∞)
- –§–æ–Ω: `#0a1018`, –∫–∞—Ä—Ç–æ—á–∫–∏: `#141e2b`
- –ê–∫—Ü–µ–Ω—Ç: `#e8a838` (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
- –û—à–∏–±–∫–∏: `#e85454`, —É—Å–ø–µ—Ö: `#4ecb71`, –∏–Ω—Ñ–æ: `#7db8e8`
- –®—Ä–∏—Ñ—Ç: Montserrat, max-width: 560px

### Chat Center (—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞)
- –§–æ–Ω: `#ffffff`, –∞–∫—Ü–µ–Ω—Ç: `#1a73e8` (—Å–∏–Ω–∏–π)
- –®—Ä–∏—Ñ—Ç: Inter
- CSS: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, 1110 —Å—Ç—Ä–æ–∫ –≤ –ø—Ä–æ—Ç–æ—Ç–∏–ø–µ
- HTML-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
  - `.chat-item`: marketplace-icon + chat-item-content > header/meta/preview
  - `.queue-section`: queue-header + —Å–ø–∏—Å–æ–∫ chat-item
  - `.message`: message-header (author + time) + message-content
  - `.ai-suggestion`: –≤–Ω—É—Ç—Ä–∏ chat-window, –ù–ï –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å
- **–ü–†–ê–í–ò–õ–û:** –°–ù–ê–ß–ê–õ–ê —á–∏—Ç–∞–π HTML –ø—Ä–æ—Ç–æ—Ç–∏–ø, –ü–û–¢–û–ú –∫–æ–ø–∏—Ä—É–π —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ CSS

### Chat Center ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∏ —Å–µ–∫—Ü–∏–∏ (–ö–†–ò–¢–ò–ß–ù–û)
–¢—Ä–∏ —Å–µ–∫—Ü–∏–∏ –≤ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ `sla_priority` + `chat_status`:

1. **¬´–í —Ä–∞–±–æ—Ç–µ¬ª** ‚Äî –¢–û–õ–¨–ö–û `sla_priority === 'urgent'`
   - –ö—Ä–∞—Å–Ω—ã–π dot (`.status-dot.waiting.risk`)
   - CSS –∫–ª–∞—Å—Å `.urgent` –Ω–∞ `.chat-item`
2. **¬´–û–∂–∏–¥–∞—é—Ç –æ—Ç–≤–µ—Ç–∞¬ª** ‚Äî –ù–ï urgent + (`chat_status === 'waiting'` –ò–õ–ò `chat_status === 'client-replied'`)
   - –ñ—ë–ª—Ç—ã–π dot (`.status-dot.waiting`) –¥–ª—è waiting
   - –°–∏–Ω–∏–π dot (`.status-dot.client-replied`) –¥–ª—è client-replied
3. **¬´–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è¬ª** ‚Äî `chat_status === 'responded'` –ò–õ–ò `chat_status === 'auto-response'` –ò–õ–ò `chat_status === 'closed'`
   - –ó–µ–ª—ë–Ω—ã–π dot (`.status-dot.responded`)
   - –°–µ—Ä—ã–π dot (`.status-dot.auto-response`)

**–ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ `unread_count` –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏!** –¢–æ–ª—å–∫–æ `sla_priority` + `chat_status`.
**`high` priority ‚â† urgent!** `high` –∏–¥—ë—Ç –≤ ¬´–û–∂–∏–¥–∞—é—Ç –æ—Ç–≤–µ—Ç–∞¬ª, –ù–ï –≤ ¬´–í —Ä–∞–±–æ—Ç–µ¬ª.

### Chat Center ‚Äî –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —á–∞—Ç–∞ (chat_status)
```
waiting ‚Üí responded ‚Üí client-replied ‚Üí closed
                   ‚Üë__________________|
```
- **waiting** ‚Äî –Ω–æ–≤—ã–π —á–∞—Ç –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–ª, –∂–¥—ë—Ç –æ—Ç–≤–µ—Ç–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞
- **responded** ‚Äî –ø—Ä–æ–¥–∞–≤–µ—Ü –æ—Ç–≤–µ—Ç–∏–ª, –∂–¥—ë–º —Ä–µ–∞–∫—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞
- **client-replied** ‚Äî –∫–ª–∏–µ–Ω—Ç –æ—Ç–≤–µ—Ç–∏–ª –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞
- **closed** ‚Äî —á–∞—Ç –∑–∞–∫—Ä—ã—Ç (–≤—Ä—É—á–Ω—É—é –∏–ª–∏ auto-close —á–µ—Ä–µ–∑ 10 –¥–Ω–µ–π –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** `_recalculate_chat_status()` –≤ `sync.py` –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏.

### Chat Center ‚Äî –ò–Ω—Ç–µ–Ω—Ç—ã –∏ SLA –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã (ai_analyzer.py)

**Post-purchase –∏–Ω—Ç–µ–Ω—Ç—ã:**
| –ò–Ω—Ç–µ–Ω—Ç | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | SLA |
|--------|-----------|-----|
| `defect_not_working` | **urgent** | <30 –º–∏–Ω |
| `wrong_item` | **urgent** | <30 –º–∏–Ω |
| `delivery_problem` | high | <1 —á–∞—Å |
| `return_refund` | high | <1 —á–∞—Å |
| `missing_parts` | high | <1 —á–∞—Å |
| `quality_complaint` | normal | <4 —á–∞—Å–∞ |
| `usage_question` | normal | <4 —á–∞—Å–∞ |
| `positive_feedback` | low | <24 —á–∞—Å–∞ |

**Pre-purchase –∏–Ω—Ç–µ–Ω—Ç—ã (HIGH priority ‚Äî –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –°–ï–ô–ß–ê–° –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ!):**
| –ò–Ω—Ç–µ–Ω—Ç | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | SLA (—á–∞—Ç) | SLA (–≤–æ–ø—Ä–æ—Å) |
|--------|-----------|-----------|--------------|
| `pre_purchase` | **high** | **<2 –º–∏–Ω** (AI auto) | <5 –º–∏–Ω |
| `sizing_fit` | **high** | **<2 –º–∏–Ω** (AI auto) | <5 –º–∏–Ω |
| `availability` | **high** | **<2 –º–∏–Ω** (AI auto) | <5 –º–∏–Ω |
| `compatibility` | **high** | **<2 –º–∏–Ω** (AI auto) | <5 –º–∏–Ω |

> –ü–æ–¥—Ä–æ–±–Ω–µ–µ: [`docs/SLA_RULES.md`](docs/SLA_RULES.md) ‚Äî –æ–∫–Ω–æ —Ä–µ—à–µ–Ω–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è 10-20 —Å–µ–∫, 1 —á–∞—Å = —É—Å—Ç–∞—Ä–µ–≤—à–∏–π human benchmark

**–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ pre-purchase:**
- `sizing_fit`: —Ä–∞–∑–º–µ—Ä, —Ä–∞–∑–º–µ—Ä–Ω–∞—è —Å–µ—Ç–∫–∞, –∫–∞–∫–æ–π —Ä–∞–∑–º–µ—Ä, –ø–æ–¥–æ–π–¥—ë—Ç –ª–∏
- `availability`: –≤ –Ω–∞–ª–∏—á–∏–∏, –µ—Å—Ç—å –ª–∏, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç, –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ
- `compatibility`: —Å–æ–≤–º–µ—Å—Ç–∏–º, –ø–æ–¥–æ–π–¥—ë—Ç –∫, —Ä–∞–±–æ—Ç–∞–µ—Ç —Å, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è

### Chat Center ‚Äî Filter Pills (–ª–µ–≤–∞—è –ø–∞–Ω–µ–ª—å)
–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ç–∞–±—ã-—Ñ–∏–ª—å—Ç—Ä—ã –ø–æ–≤–µ—Ä—Ö queue sections:

| Pill | –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|------|-------------------|------------|
| **–í—Å–µ** | –ë–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞ | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —á–∞—Ç—ã |
| **–°—Ä–æ—á–Ω–æ** | `sla_priority === 'urgent' \|\| 'high'` | Client-side only |
| **–ë–µ–∑ –æ—Ç–≤–µ—Ç–∞** | `unread_count > 0` | Server-side (`has_unread=true`) |
| **–û–±—Ä–∞–±–æ—Ç–∞–Ω—ã** | `chat_status in ('responded', 'auto-response', 'closed')` | Client-side only |

**Empty state –ø—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–µ:** –µ—Å–ª–∏ `chats.length > 0`, –Ω–æ `filteredChats.length === 0` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å "–ù–µ—Ç —á–∞—Ç–æ–≤ –ø–æ —Ñ–∏–ª—å—Ç—Ä—É" + –∫–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ". –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å onboarding empty state (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ API).

### Chat Center ‚Äî Mobile (–ö–†–ò–¢–ò–ß–ù–û)
- **Breakpoints:** `768px` (mobile), `769-1024px` (tablet)
- **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–∞–Ω–µ–ª–µ–π:** `data-mobile-view` –∞—Ç—Ä–∏–±—É—Ç –Ω–∞ `.chat-center` ‚Äî `list` / `chat` / `context`
- –ù–∞ mobile –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –û–î–ù–ê –ø–∞–Ω–µ–ª—å fullscreen, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ state –≤ `App.tsx`
- –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" (`.chat-header-back`) –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ mobile (`display: none !important` –Ω–∞ `>=769px`)
- **Product context** –Ω–∞ tablet: —Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ –∫–Ω–æ–ø–∫–µ –∫–∞–∫ floating overlay
- **Input font-size:** `>=16px` –Ω–∞ mobile —á—Ç–æ–±—ã iOS –Ω–µ –∑—É–º–∏–ª
- **Touch targets:** –º–∏–Ω–∏–º—É–º `44x44px` –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **Filter pills:** –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª —á–µ—Ä–µ–∑ `.filters-scroll` —Å `overflow-x: auto`
- **Advanced filters:** `position: fixed; bottom: 0` –∫–∞–∫ bottom sheet –Ω–∞ mobile
- **CSS —Ñ–∞–π–ª:** `frontend/src/index.css` —Å—Ç—Ä–æ–∫–∏ 1091-1199 (mobile), 1201-1220 (tablet)

### Landing (—Ç—ë–º–Ω–∞—è —Ç–µ–º–∞)
- –§–æ–Ω: `#0a1018`, –∫–∞—Ä—Ç–æ—á–∫–∏: `#141e2b`, –∞–∫—Ü–µ–Ω—Ç: `#e8a838`
- –õ–æ–≥–æ: `AGENT<span>IQ</span>` (span –≤ —Ü–≤–µ—Ç–µ –∞–∫—Ü–µ–Ω—Ç–∞)
- Favicon: inline SVG (data URI)
- Breakpoints: 400px, 640px, 768px
- Slider: overflow:hidden, scale(1.08) —Ç–æ–ª—å–∫–æ –Ω–∞ desktop

### Help Panel (UI –ø–∞—Ç—Ç–µ—Ä–Ω, –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
- –ò—Å–ø–æ–ª—å–∑—É–π –µ–¥–∏–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `promo-help-panel` –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –ø–∞–Ω–µ–ª–µ–π (`–ü—Ä–æ–º–æ–∫–æ–¥—ã`, `–ì–ª–∞–≤–Ω–∞—è`, `–ê–Ω–∞–ª–∏—Ç–∏–∫–∞`, `–ù–∞—Å—Ç—Ä–æ–π–∫–∏`).
- –ü–∞–Ω–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è **—Å–ø—Ä–∞–≤–∞** (`right slide-out`), –±–µ–∑ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–≥–æ left-–≤–∞—Ä–∏–∞–Ω—Ç–∞.
- –¢—Ä–∏–≥–≥–µ—Ä –æ—Ç–∫—Ä—ã—Ç–∏—è —Å—Ç–∞–≤—å –≤ –≤–µ—Ä—Ö–Ω—é—é —Å—Ç—Ä–æ–∫—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –±–ª–æ–∫–∞ (–ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É `–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?` –≤ `SCREEN 7: PROMO CODES`).
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–ª–∞—Å—Å—ã –ø–∞–Ω–µ–ª–∏: `promo-help-close`, `promo-help-title`, `promo-help-section`, `promo-help-label`, `promo-help-text`.
- –ù–∞ mobile –ø–∞–Ω–µ–ª—å –¥–æ–ª–∂–Ω–∞ –∑–∞–Ω–∏–º–∞—Ç—å –ø–æ–ª–Ω—É—é —à–∏—Ä–∏–Ω—É (`width: 100%`).
- –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∏–º–µ—Ä—ã: `docs/design-system/HELP_PANEL.md`.

---

## 3. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤

### "–ö–∞–∫ —Å—Ç–æ–∏–ª–æ –æ—Ç–≤–µ—Ç–∏—Ç—å" = –ì–û–¢–û–í–´–ô –¢–ï–ö–°–¢
- –ü–∏—à–∏ **–≥–æ—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç –ª–∏—Ü–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞** –≤ –∫–∞–≤—ã—á–∫–∞—Ö
- –ù–ï –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏/—Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ: `¬´–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ –æ—Ç–∑—ã–≤! –ù–∞–º –∂–∞–ª—å, —á—Ç–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –Ω–µ –æ–ø—Ä–∞–≤–¥–∞–ª–æ –æ–∂–∏–¥–∞–Ω–∏–π...¬ª`
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: `¬´–°—Ç–æ–∏–ª–æ –∏–∑–≤–∏–Ω–∏—Ç—å—Å—è –∑–∞ –Ω–µ–¥–æ–ø–æ–Ω–∏–º–∞–Ω–∏–µ –∏ –≤–µ–∂–ª–∏–≤–æ –æ–±—ä—è—Å–Ω–∏—Ç—å...¬ª`

### Banned phrases (–ù–ò–ö–û–ì–î–ê –Ω–µ –ø–∏—Å–∞—Ç—å)
- "–≤–µ—Ä–Ω—ë–º –¥–µ–Ω—å–≥–∏", "–≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –≤–æ–∑–≤—Ä–∞—Ç/–∑–∞–º–µ–Ω—É", "–ø–æ–ª–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç", "–±–µ—Å–ø–ª–∞—Ç–Ω—É—é –∑–∞–º–µ–Ω—É"
- "–≤—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ", "–≤—ã –Ω–µ —Ç–∞–∫", "–≤–∞—à–∞ –≤–∏–Ω–∞", "—Å–∞–º–∏ –≤–∏–Ω–æ–≤–∞—Ç—ã"
- "–æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É" (= –æ—Ç–ø–∏—Å–∫–∞)
- "–ò–ò", "–±–æ—Ç", "–Ω–µ–π—Ä–æ—Å–µ—Ç—å", "GPT", "ChatGPT", "–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç"

### –í–æ–∑–≤—Ä–∞—Ç/–∑–∞–º–µ–Ω–∞ ‚Äî –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å —Å–∞–º –ø–æ–ø—Ä–æ—Å–∏–ª
- –¢—Ä–∏–≥–≥–µ—Ä—ã: "–≤–æ–∑–≤—Ä–∞—Ç", "–≤–µ—Ä–Ω—É—Ç—å", "–∑–∞–º–µ–Ω–∞", "–∑–∞–º–µ–Ω–∏—Ç—å", "–æ–±–º–µ–Ω—è—Ç—å"
- –ï—Å—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä ‚Üí "–û—Ñ–æ—Ä–º–∏—Ç–µ –≤–æ–∑–≤—Ä–∞—Ç —á–µ—Ä–µ–∑ –õ–ö WB –∫–∞–∫ ¬´–Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—é¬ª"
- –ù–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä–∞ ‚Üí —ç–º–ø–∞—Ç–∏—è + –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ + –ø–æ–º–æ—â—å, –ë–ï–ó —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞

---

## 4. Quality Score —Ñ–æ—Ä–º—É–ª–∞ (–ü–†–û–¶–ï–ù–¢–ù–ê–Ø)

```
score = 10 - (harmful_pct √ó 0.1) - (risky_pct √ó 0.05) + (good_pct √ó 0.02)
```
- –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç total_analyzed, –ù–ï –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ —á–∏—Å–ª–æ
- –ü—Ä–∏–º–µ—Ä: 5 harmful –∏–∑ 202 (2.5%) ‚Üí 10 - 0.25 = 9.75 ‚Üí –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ 10/10
- –ö–æ–Ω—Ç–µ–∫—Å—Ç: ¬´–°–ø–∞—Å–∏–±–æ!¬ª –Ω–∞ 5‚òÖ = acceptable, –Ω–∞ 1‚òÖ = harmful (ignore)

---

## 5. WB API

### CDN (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
Base: `https://basket-{N}.wbbasket.ru/vol{V}/part{P}/{nmId}/info/`
- `V = nmId // 100000`, `P = nmId // 1000`
- `‚Ä¶/ru/card.json` ‚Üí —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –æ–ø–∏—Å–∞–Ω–∏–µ
- `‚Ä¶/price-history.json` ‚Üí –∫–æ–ø–µ–π–∫–∏ √∑ 100 = —Ä—É–±–ª–∏

### WBCON Feedbacks API
- Base: `https://19-fb.wbcon.su/`, Auth: header `token: <JWT>`
- `POST /create_task_fb` ‚Üí `GET /task_status` ‚Üí `GET /get_results_fb`
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è: offset +100, –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô dedup –ø–æ `fb_id` (–¥—É–±–ª–∏–∫–∞—Ç—ã!)

---

## 6. –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –±–∞–≥–∏ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

- **12-month filter** ‚Äî feedbacks —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –∑–∞ 366 –¥–Ω–µ–π (boundary case)
- **WBCON pagination** ‚Äî offset –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã, dedup –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
- **Color normalization** ‚Äî `color` –º–æ–∂–µ—Ç –±—ã—Ç—å "4 —à—Ç. ¬∑ 120 –º", —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ `is_color_variant()`
- **LLM distribution** ‚Äî LLM –º–æ–∂–µ—Ç –Ω–µ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ—Ç–∑—ã–≤—ã, gap ‚Üí `acceptable`
- **Celery timeout** ‚Äî 300s –¥–ª—è subprocess (DeepSeek –±—ã–≤–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω—ã–π)
- **Trend fallback** ‚Äî 30-day window –Ω—É–∂–Ω–æ >=3 –æ—Ç–∑—ã–≤–æ–≤, –∏–Ω–∞—á–µ split-half
- **f-string** ‚Äî `!r` –Ω–µ–ª—å–∑—è –≤–Ω—É—Ç—Ä–∏ f-string, –∏—Å–ø–æ–ª—å–∑—É–π temp var
- **venv** ‚Äî system python –Ω–µ—Ç dotenv, –∑–∞–ø—É—Å–∫–∞–π —á–µ—Ä–µ–∑ `source venv/bin/activate`

### Vite/Rollup build-time optimization (–ö–†–ò–¢–ò–ß–ù–û!)
**–ü—Ä–æ–±–ª–µ–º–∞:** Rollup –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç `window.location.hostname` –Ω–∞ –º–æ–º–µ–Ω—Ç —Å–±–æ—Ä–∫–∏ (localhost), –ø–æ—ç—Ç–æ–º—É runtime –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç.

**–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û** (–±—É–¥–µ—Ç –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω localhost):
```typescript
const isLocalhost = window.location.hostname === 'localhost';
const API_URL = isLocalhost ? 'http://localhost:8001/api' : '/api';
```

**–ü–†–ê–í–ò–õ–¨–ù–û** (–∏—Å–ø–æ–ª—å–∑—É–π interceptor –¥–ª—è runtime –ø—Ä–æ–≤–µ—Ä–∫–∏):
```typescript
const api = axios.create({ headers: { 'Content-Type': 'application/json' } });

api.interceptors.request.use((config) => {
  if (!config.baseURL) {
    const loc = window['location']; // indirect access prevents optimization
    const hostname = loc.hostname;
    config.baseURL = (hostname === 'localhost' || hostname === '127.0.0.1')
      ? 'http://localhost:8001/api'
      : '/api';
  }
  return config;
});
```

---

## 7. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ comm-*.html (—à–∞–±–ª–æ–Ω –æ—Ç—á—ë—Ç–∞)

–ü–æ—Ä—è–¥–æ–∫ —Å–µ–∫—Ü–∏–π (—ç—Ç–∞–ª–æ–Ω: `communication-loss-282955222.html`):
1. **–ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤** ‚Äî verdict, gauge, stats (4 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏), loss-box ‚ÇΩ/–º–µ—Å
2. **–°–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞** ‚Äî –º–µ–¥–∏–∞–Ω–∞/—Å—Ä–µ–¥–Ω–µ–µ –¥–ª—è –Ω–µ–≥–∞—Ç–∏–≤–∞ –∏ –≤—Å–µ—Ö
3. **–ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ (breakdown)** ‚Äî –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –±–∞—Ä—ã
4. **[Fashion]** –†–∞–∑–º–µ—Ä, —Ç–∫–∞–Ω—å, —Ü–≤–µ—Ç ‚Äî —Ç–∞–±–ª–∏—Ü–∞ —Å —Ç–µ–≥–∞–º–∏
5. **–¢–û–ü-3 —Ö—É–¥—à–∏—Ö** ‚Äî —Ü–∏—Ç–∞—Ç–∞ + —Ç–µ–≥ + expandable "–ö–∞–∫ —Å—Ç–æ–∏–ª–æ –æ—Ç–≤–µ—Ç–∏—Ç—å"
6. **–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—å** ‚Äî perception list
7. **–°–∫—Ä—ã—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ –ø–æ–∑–∏—Ç–∏–≤–µ** ‚Äî 4-5‚òÖ —Å –∂–∞–ª–æ–±–∞–º–∏
8. **–ß—Ç–æ –¥–µ–ª–∞—Ç—å** ‚Äî "–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ" + numbered action list

---

## 8. –°–µ—Ä–≤–µ—Ä—ã –∏ –¥–µ–ø–ª–æ–π

### VPS (dev/staging)
- **IP:** `79.137.175.164`
- **–î–æ–º–µ–Ω (prod):** `agentiq.ru` (SSL —á–µ—Ä–µ–∑ Let's Encrypt)
- **SSH –∫–ª—é—á:** `~/Downloads/ubuntu-STD3-2-4-20GB-snQXiBJ3_Ilyin.pem`
- **SSH –∫–æ–º–∞–Ω–¥–∞:** `ssh -i ~/Downloads/ubuntu-STD3-2-4-20GB-snQXiBJ3_Ilyin.pem ubuntu@79.137.175.164`

### Prod URLs
- **Landing:** `https://agentiq.ru/`
- **App (Chat Center):** `https://agentiq.ru/app/`
- **API:** `https://agentiq.ru/api/`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- `/var/www/agentiq/landing.html` ‚Äî –ª–µ–Ω–¥–∏–Ω–≥ (–∫–æ—Ä–µ–Ω—å `/`)
- `/var/www/agentiq/app/` ‚Äî React SPA (`/app`)
- `/var/www/agentiq/assets/` ‚Äî JS/CSS –±–∞–Ω–¥–ª—ã
- `/opt/agentiq/` ‚Äî backend –∫–æ–¥ + venv
- **Systemd —Å–µ—Ä–≤–∏—Å:** `agentiq-chat` (`sudo systemctl restart agentiq-chat`)
- **–ë–∞–∑–∞:** PostgreSQL `agentiq_chat` (user: `agentiq`)

### –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ
```bash
# Backend
cd apps/chat-center/backend
source venv/bin/activate
uvicorn app.main:app --host 0.0.0.0 --port 8001

# Frontend
cd apps/chat-center/frontend
npm run dev -- --host 0.0.0.0
```

### –î–µ–ø–ª–æ–π frontend –Ω–∞ prod
```bash
# 1. –°–æ–±—Ä–∞—Ç—å
cd apps/chat-center/frontend
npm run build

# 2. –ó–∞–ª–∏—Ç—å
rsync -avz --delete -e "ssh -i ~/Downloads/ubuntu-STD3-2-4-20GB-snQXiBJ3_Ilyin.pem" \
  dist/ ubuntu@79.137.175.164:/tmp/agentiq-deploy/

# 3. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å
ssh -i ~/Downloads/ubuntu-STD3-2-4-20GB-snQXiBJ3_Ilyin.pem ubuntu@79.137.175.164 "
  mv /tmp/agentiq-deploy/index.html /tmp/agentiq-deploy/landing.html
  sudo rm -rf /var/www/agentiq/assets/*
  sudo cp -r /tmp/agentiq-deploy/* /var/www/agentiq/
  sudo chown -R www-data:www-data /var/www/agentiq/
"
```

### Seed demo –¥–∞–Ω–Ω—ã—Ö –Ω–∞ prod
```bash
ssh -i ~/Downloads/ubuntu-STD3-2-4-20GB-snQXiBJ3_Ilyin.pem ubuntu@79.137.175.164
sudo -u postgres psql -d agentiq_chat
# SQL INSERT statements...
```

### nginx –∫–æ–Ω—Ñ–∏–≥
- –§–∞–π–ª: `/etc/nginx/sites-enabled/agentiq`
- Landing: `location = / { try_files /landing.html =404; }`
- App: `location /app/ { alias /var/www/agentiq/app/; try_files $uri /app/index.html; }`
- API: `location /api/ { proxy_pass http://127.0.0.1:8001/api/; }`

### Celery (—Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏)
**–°–µ—Ä–≤–∏—Å—ã:**
- `agentiq-celery` ‚Äî worker (2 –ø—Ä–æ—Ü–µ—Å—Å–∞)
- `agentiq-celery-beat` ‚Äî scheduler –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
sudo systemctl status agentiq-celery      # –°—Ç–∞—Ç—É—Å worker
sudo systemctl status agentiq-celery-beat # –°—Ç–∞—Ç—É—Å scheduler
sudo systemctl restart agentiq-celery     # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo journalctl -u agentiq-celery -f      # –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```

**–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ (beat_schedule):**
- `sync_all_sellers` ‚Äî –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫ (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–∞—Ç–æ–≤ —Å WB/Ozon)
- `check_sla_escalation` ‚Äî –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω (—ç—Å–∫–∞–ª–∞—Ü–∏—è SLA)
- `analyze_pending_chats` ‚Äî –∫–∞–∂–¥—ã–µ 2 –º–∏–Ω (AI –∞–Ω–∞–ª–∏–∑ –Ω–æ–≤—ã—Ö —á–∞—Ç–æ–≤)
- `auto_close_inactive_chats` ‚Äî –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞ (–∑–∞–∫—Ä—ã—Ç–∏–µ —á–∞—Ç–æ–≤ –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ 10 –¥–Ω–µ–π)

**–§–∞–π–ª—ã —Å–µ—Ä–≤–∏—Å–æ–≤:**
- `/etc/systemd/system/agentiq-celery.service`
- `/etc/systemd/system/agentiq-celery-beat.service`

---

## 9. Workflow-–ø—Ä–∞–≤–∏–ª–∞

- **Landing sync:** –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è `docs/prototypes/landing.html` ‚Üí —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤ `apps/chat-center/frontend/landing.html`
- **Screenshots:** `docs/prototypes/screenshots/` (transparent bg, perspective)
- **–ù–µ –∏–∑–æ–±—Ä–µ—Ç–∞–π CSS** ‚Äî –∫–æ–ø–∏—Ä—É–π –∏–∑ –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤ –∏ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã
- **–ù–µ –¥–æ–±–∞–≤–ª—è–π —ç–º–æ–¥–∂–∏** ‚Äî –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–Ω–æ –Ω–µ –ø–æ–ø—Ä–æ—Å–∏–ª
- **–ö–æ–º–º–∏—Ç—ã** ‚Äî —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç, –Ω–µ proactively
- **CLAUDE.md –ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å** ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç IP, SSH-–∫–ª—é—á–∏, JWT-—Ç–æ–∫–µ–Ω—ã, –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É. –í—Å–µ–≥–¥–∞ –∏—Å–∫–ª—é—á–∞—Ç—å –∏–∑ `git add`
- **–≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤** ‚Äî –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∑–∞–¥–∞—á–∏ –ø—Ä–µ–¥–ª–æ–∂–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å (—Å–º. —Å–µ–∫—Ü–∏—é –Ω–∏–∂–µ)

### –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ ‚Äî —ç–∫–æ–Ω–æ–º–∏—è –±—é–¥–∂–µ—Ç–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ **–ø—Ä–µ–¥–ª–æ–∂–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é** –∫–∞–∫—É—é –º–æ–¥–µ–ª—å –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –§–æ—Ä–º–∞—Ç: –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –≤–∏–¥–∞ `üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: /model sonnet ‚Äî –∑–∞–¥–∞—á–∞ –ø—Ä–æ—Å—Ç–∞—è, —ç–∫–æ–Ω–æ–º–∏–º ~5x`.

| –ó–∞–¥–∞—á–∞ | –ú–æ–¥–µ–ª—å | –ü–æ—á–µ–º—É |
|--------|--------|--------|
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, —Å–ª–æ–∂–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥, –ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ | **Opus** (—Ç–µ–∫—É—â–∏–π) | –ù—É–∂–Ω–∞ –≥–ª—É–±–∏–Ω–∞ –º—ã—à–ª–µ–Ω–∏—è |
| –ù–∞–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞, —Ñ–∏—á–∏, –±–∞–≥-—Ñ–∏–∫—Å—ã | **Sonnet** (`/model sonnet`) | 5x –¥–µ—à–µ–≤–ª–µ, –∫–∞—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ |
| –ü—Ä–æ—Å—Ç—ã–µ –ø—Ä–∞–≤–∫–∏, CSS, copy-paste, –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è | **Sonnet** (`/model sonnet`) | –¢–æ—á–Ω–æ —Ö–≤–∞—Ç–∏—Ç |
| –ü–æ–∏—Å–∫ –ø–æ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ, —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ | **Haiku** subagents | 20x –¥–µ—à–µ–≤–ª–µ, –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è grep/read |
| –†–µ—Å–µ—Ä—á, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ | **Sonnet** | –•–≤–∞—Ç–∞–µ—Ç, –Ω–µ –Ω—É–∂–µ–Ω Opus |
| –î–µ–ø–ª–æ–π, git –æ–ø–µ—Ä–∞—Ü–∏–∏, shell –∫–æ–º–∞–Ω–¥—ã | **Sonnet** | –ö–æ–º–∞–Ω–¥—ã –ø—Ä–æ—Å—Ç—ã–µ |

**–ü—Ä–∞–≤–∏–ª–∞:**
- –í—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–π —Å–µ—Å—Å–∏—é —Å Sonnet, –ø–µ—Ä–µ–∫–ª—é—á–∞–π –Ω–∞ Opus —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ —Ä–µ–∞–ª—å–Ω–æ —Å–ª–æ–∂–Ω–∞—è
- Subagents –¥–ª—è –ø–æ–∏—Å–∫–∞ ‚Äî –≤—Å–µ–≥–¥–∞ `model: "haiku"`
- –ù–æ–≤—ã–π —á–∞—Ç –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–µ–º—ã ‚Äî –Ω–µ —Ä–∞–∑–¥—É–≤–∞–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (input tokens = –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞—Å—Ö–æ–¥)
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –Ω–∞ Opus –∏ –∑–∞–¥–∞—á–∞ –ø—Ä–æ—Å—Ç–∞—è ‚Äî –Ω–∞–ø–æ–º–Ω–∏ –ø—Ä–æ `/model sonnet`

---

## 10. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ–∏—á

### –ö–æ–≥–¥–∞ –ø–∏—Å–∞—Ç—å –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã
**–í—Å–µ–≥–¥–∞ –ø–∏—à–∏ pytest —Ç–µ—Å—Ç—ã –¥–ª—è:**
- API endpoints (auth, chats, messages, sync)
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–∞—Ç–æ–≤, AI –∞–Ω–∞–ª–∏–∑, SLA –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ API (WB Connector, Ozon Connector)
- –õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—É—Ç—è—Ö (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤ (best practices)
```
backend/tests/
‚îú‚îÄ‚îÄ conftest.py          # Fixtures: test_client, auth_token, test_user_data
‚îú‚îÄ‚îÄ test_api.py          # API endpoint tests
‚îú‚îÄ‚îÄ test_auth.py         # Auth-specific tests
‚îú‚îÄ‚îÄ test_sync.py         # Sync task tests
‚îú‚îÄ‚îÄ test_wb_connector.py # WB API integration tests
‚îî‚îÄ‚îÄ test_ai_analyzer.py  # AI analysis tests
```

### –ü–∞—Ç—Ç–µ—Ä–Ω —Ç–µ—Å—Ç–∞
```python
def test_feature_does_something(client, auth_token):
    """–û–ø–∏—Å–∞–Ω–∏–µ —á—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º."""
    # Arrange
    headers = {"Authorization": f"Bearer {auth_token}"}

    # Act
    response = client.post("/api/endpoint", json={...}, headers=headers)

    # Assert
    assert response.status_code == 200
    assert response.json()["field"] == expected_value
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
cd apps/chat-center/backend
source venv/bin/activate
pytest -v                    # –í—Å–µ —Ç–µ—Å—Ç—ã
pytest -v tests/test_api.py  # –û–¥–∏–Ω —Ñ–∞–π–ª
pytest -v -k "test_auth"     # –ü–æ –∏–º–µ–Ω–∏
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ (coverage)
- **–¶–µ–ª—å:** 80%+ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞: `pytest --cov=app --cov-report=html`

---

## 11. Tech Debt –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### TODO: –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏

#### Sync —Å–∏—Å—Ç–µ–º–∞ (apps/chat-center/backend/app/tasks/sync.py)
- [ ] **Cursor persistence:** —Å–µ–π—á–∞—Å `last_cursor = None` ‚Äî –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è–º–∏
  - –ù—É–∂–Ω–æ: —Ö—Ä–∞–Ω–∏—Ç—å cursor –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ `sync_state` –∏–ª–∏ –≤ `seller.sync_cursor`
  - –°—Ç—Ä–æ–∫–∞: `sync.py:114` ‚Äî `# TODO: Store cursor in separate table or seller metadata`

#### Celery (apps/chat-center/backend/)
- [x] **Celery Beat:** –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–æ–¥–µ (systemd —Å–µ—Ä–≤–∏—Å—ã agentiq-celery, agentiq-celery-beat)
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫, AI –∞–Ω–∞–ª–∏–∑ –∫–∞–∂–¥—ã–µ 2 –º–∏–Ω, SLA —ç—Å–∫–∞–ª–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω
  - Auto-close –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤ –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞ (10 –¥–Ω–µ–π –±–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏–π)

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- [ ] **–ú–∏–≥—Ä–∞—Ü–∏–∏:** –Ω–µ—Ç Alembic, –∫–æ–ª–æ–Ω–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é
  - –ù—É–∂–Ω–æ: –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `alembic init` –∏ –∞–≤—Ç–æ–º–∏–≥—Ä–∞—Ü–∏–∏
  - –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ø–æ–ª–µ–π –Ω—É–∂–Ω–æ `ALTER TABLE` –Ω–∞ –ø—Ä–æ–¥–µ

#### Frontend
- [ ] **Error boundaries:** –Ω–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ React
- [ ] **Offline support:** –Ω–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è / service worker

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

#### WB Chat API
- **–ù–µ—Ç order_id:** —á–∞—Ç –Ω–µ–ª—å–∑—è —Å–≤—è–∑–∞—Ç—å —Å –∑–∞–∫–∞–∑–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  - Workaround: —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ —É –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
- **–ù–µ—Ç unread_count:** —Å—á–∏—Ç–∞–µ–º –ª–æ–∫–∞–ª—å–Ω–æ –ø–æ `is_read = false`
- **–ù–µ—Ç webhooks:** —Ç–æ–ª—å–∫–æ polling –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫

#### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- [ ] **bcrypt –≤–µ—Ä—Å–∏—è:** —Ç—Ä–µ–±—É–µ—Ç—Å—è `bcrypt < 5.0` –∏–∑-–∑–∞ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å passlib
  - –§–∞–π–ª: `requirements.txt` ‚Äî `bcrypt==4.3.0`
