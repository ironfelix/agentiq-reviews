{"openapi":"3.1.0","info":{"title":"Парсер отзывов ВБ","description":"![N|Solid](https://16.img.avito.st/image/1/1.gdnYc7a2LTDO05cw1iWLsB7QLTpmcCyKbNAv.CNrNGk2tNLoEb5nA62TaA8FbzRoGFnlrQ7R1PPgtVqA)\n## API-сервис получения отзывов на товары Wildberries (ДЕМО)\n_______________________________________________________________________________________________\n## Инструкция:\n### Для получения отзывов на определенный артикул необходимо сделать следующее: \n### 1. **Поставить задачу** на сбор отзывов (через POST-запрос на https://fb.wbcon.su/create_task_fb) - в ответ придет идентификатор задачи.\n#### Параметры тела запроса (json):\n    {\n      \"article\": 0000000\n    }\n#### Пример ответа:\n    {\n      \"created\": true, # задача создана\n      \"task_id\": 111 # идентификатор задачи - 111\n    }\n### 2. **Проверить статус** выполнения задачи (GET-запрос на https://fb.wbcon.su/task_status?task_id={идентификатор_задачи})\n#### Пример ответа:\n    {\n      \"is_ready\": true, # задача выполнена\n      \"error\": \"\" # ошибок нет\n    }\n\n### 3. **Получить результаты** выполнения задачи (GET-запрос на https://fb.wbcon.su/get_results_fb?task_id={идентификатор_задачи}))\n#### Пример ответа (json):\n    [\n      {\n        \"feedback_count\": 28,\n        \"feedback_count_with_photo\": 13,\n        \"feedback_count_with_text\": 19,\n        \"feedback_count_with_video\": 1,\n        \"bigger_size_percentage\": 0,\n        \"smaller_size_percentage\": 0,\n        \"ok_size_percentage\": 100,\n        \"five_valuation_distr\": 25,\n        \"four_valuation_distr\": 2,\n        \"three_valuation_distr\": 0,\n        \"two_valuation_distr\": 1,\n        \"one_valuation_distr\": 0,\n        \"rating\": 4.8,\n        \"feedbacks\": [\n          {\n            \"fb_id\": \"J80SduNG_kZ27nTwK72Y\",\n            \"user_id\": \"50932832\",\n            \"user_photo\": \"false\",\n            \"user_country\": \"ru\",\n            \"user_name\": \"Юлия\",\n            \"article\": \"302360915\",\n            \"fb_text\": \"Отличная куртка. Качество пошива хорошее. Размер соответствует. Для Краснодарской зимы идеальный вариант.\",\n            \"valuation\": \"5\",\n            \"rank\": \"7.0\",\n            \"color\": \"черный\",\n            \"size\": \"XL\",\n            \"fb_created_at\": \"2025-01-09T14:07:22Z\",\n            \"fb_updated_at\": \"2025-01-09T14:57:08Z\",\n            \"answer_country\": \"wbRu\",\n            \"answer_created_at\": \"2025-01-09T14:48:14Z\",\n            \"answer_updated_at\": \"2025-01-09T14:57:08Z\",\n            \"answer_editable\": \"false\",\n            \"supplier_id\": \"106539\",\n            \"answer_text\": \"Юлия, здравствуйте! Мы благодарим Вас за отзыв и высокую оценку нашего товара! Нам очень приятно получать обратную связь, мы ценим каждый отзыв! Отдельная благодарность Вам за предоставленные фотографии. Рады, что наша модель так идеально подошла. Носите с удовольствием! Ваше доверие и поддержка являются для нас важными и вдохновляющими факторами.  Для того, чтобы не пропустить наши акции с хорошими скидками, добавляйте наш бренд в избранное, нажав на сердечко в правом верхнем углу на странице бренда. С уважением и заботой, команда бренда IL Primissimo\",\n            \"vote_plus\": \"0\",\n            \"vote_minus\": \"0\",\n            \"problems\": \"[]\",\n            \"advantages\": \"Отличная\",\n            \"disadvantages\": \"\",\n            \"count_plus\": 0,\n            \"count_minus\": 0\n          }\n        ]\n      }\n    ]\n\n[//]: # (#### Чтобы начать пользоваться сервисом необходимо получить токен у администратора.)\n\n#### Параметры ответа:\n`feedback_count`: кол-во отзывов,\n\n`feedback_count_with_photo`: кол-во отзывов с фото,\n\n`feedback_count_with_text`: кол-во отзывов с текстом,\n`feedback_count_with_video`: кол-во отзывов с видео,\n\n`bigger_size_percentage`: соответствие размеру - большемерит,\n\n`smaller_size_percentage`: соответствие размеру - маломерит,\n\n`ok_size_percentage`: соответствие размеру - соответствует,\n\n`five_valuation_distr`: оценки \"5*\",\n\n`four_valuation_distr`: оценки \"4*\",\n\n`three_valuation_distr`: оценки \"3*\",\n\n`two_valuation_distr`: оценки \"2*\",\n\n`one_valuation_distr`: оценки \"1*\",\n\n`rating`: рейтинг,\n\n`fb_id`: идентификатор отзыва,\n\n`user_id`: id клиента,\n\n`user_photo`: имеется ли фотография клиента,\n\n`user_country`: страна клиента,\n\n`user_name`: имя клиента,\n\n`article`: артикул,\n\n`fb_text`: текст отзыва,\n\n`valuation`: оценка в отзыве,\n\n`rank`: ранк отзыва,\n\n`color`: цвет товара,\n\n`size`: размер товара,\n\n`fb_created_at`: дата и время создания отзыва,\n\n`fb_updated_at`: дата и время обновления отзыва,\n\n`answer_country`: страна ответа на отзыв,\n\n`answer_created_at`: дата и время создания ответа на отзыв,\n\n`answer_updated_at`: дата и время обновления ответа на отзыв,\n\n`answer_editable`: ответ на отзыв доступен к изменению,\n\n`supplier_id`: id продавца,\n\n`answer_text`: текст ответа на отзыв,\n\n`vote_plus`: голос «+»,\n\n`vote_minus`: голос «-»,\n\n`problems`: проблематика,\n\n`advantages`: преимущества товара,\n\n`disadvantages`: недостатки товара,\n\n`count_plus`: кол-во оценок \"+\",\n\n`count_minus`: кол-во оценок \"-\"\n\n---------------------------------------------------\n##  Внимание:\n### _*Данный сервис не распространяется на тариф \"Разовый запрос\" (0,5 руб / запрос)._\n### Единственный возможный тариф для данного сервиса - БЕЗЛИМИТНЫЙ с выделением отдельного виртуального сервера. Стоимость - 5000 рублей в месяц.\n### ⚠️Технические рекомендации по стабильной работе для БЕЗЛИМИТНОГО тарифа: _5000 отзывов в минуту 5000000 в сутки._ \n#### *поможет для понимания требуемого количества машин на услугу\n\n### ❕ Ограничения для демо - 3 артикула (117220345,178614734,255299570) и 2 запроса в минуту❕\n","version":"0.1.0"},"paths":{"/create_task_fb":{"post":{"tags":["Создать задачу сбора отзывов по артикулу (до 1000 отзывов)"],"summary":"Создать задачу сбора отзывов по артикулу (до 1000 отзывов)","description":"Создаем задачу получения отзывов по одному артикулу.","operationId":"create_task_fb_create_task_fb_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Article"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{},"example":{"created":true,"task_id":111}}},"detail":"Успешно"},"403":{"description":"Forbidden","detail":"Артикул не подходит. В демо только три артикула - 117220345, 178614734, 255299570."},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/get_results_fb":{"get":{"tags":["Получить результаты сбора отзывов по артикулу (до 1000 отзывов)"],"summary":"Получить результаты сбора отзывов по артикулу (до 1000 отзывов)","description":"Получаем результат сбора отзывов из БД.","operationId":"load_fb_results_from_db_get_results_fb_get","parameters":[{"name":"task_id","in":"query","required":true,"schema":{"type":"integer","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{},"example":[{"feedback_count":28,"feedback_count_with_photo":13,"feedback_count_with_text":19,"feedback_count_with_video":1,"bigger_size_percentage":0,"smaller_size_percentage":0,"ok_size_percentage":100,"five_valuation_distr":25,"four_valuation_distr":2,"three_valuation_distr":0,"two_valuation_distr":1,"one_valuation_distr":0,"rating":4.8,"feedbacks":[{"fb_id":"J80SduNG_kZ27nTwK72Y","user_id":"50932832","user_photo":"false","user_country":"ru","user_name":"Юлия","article":"302360915","fb_text":"Отличная куртка. Качество пошива хорошее. Размер соответствует. Для Краснодарской зимы идеальный вариант.","valuation":"5","rank":"7.0","color":"черный","size":"XL","fb_created_at":"2025-01-09T14:07:22Z","fb_updated_at":"2025-01-09T14:57:08Z","answer_country":"wbRu","answer_created_at":"2025-01-09T14:48:14Z","answer_updated_at":"2025-01-09T14:57:08Z","answer_editable":"false","supplier_id":"106539","answer_text":"Юлия, здравствуйте! Мы благодарим Вас за отзыв и высокую оценку нашего товара! Нам очень приятно получать обратную связь, мы ценим каждый отзыв! Отдельная благодарность Вам за предоставленные фотографии. Рады, что наша модель так идеально подошла. Носите с удовольствием! Ваше доверие и поддержка являются для нас важными и вдохновляющими факторами.  Для того, чтобы не пропустить наши акции с хорошими скидками, добавляйте наш бренд в избранное, нажав на сердечко в правом верхнем углу на странице бренда. С уважением и заботой, команда бренда IL Primissimo","vote_plus":"0","vote_minus":"0","problems":"[]","advantages":"Отличная","disadvantages":"","count_plus":0,"count_minus":0}]}]}},"detail":"Успешно"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/task_status":{"get":{"tags":["Статус выполнения задачи"],"summary":"Статус выполнения задачи","description":"Проверяем статус задания","operationId":"check_task_status_task_status_get","parameters":[{"name":"task_id","in":"query","required":true,"schema":{"type":"integer","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{},"example":{"created":true,"task_id":111}}},"detail":"Успешно"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Article":{"properties":{"article":{"type":"integer","title":"Article"}},"type":"object","required":["article"],"title":"Article"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}