# AgentIQ PostgreSQL Backup Cron Configuration
#
# Installation instructions:
# 1. Copy this file to /etc/cron.d/agentiq-backup
# 2. Ensure scripts are executable: chmod +x /opt/agentiq/scripts/ops/db-backup.sh
# 3. Create .pgpass file: echo "localhost:5432:agentiq_chat:agentiq:PASSWORD" > ~/.pgpass && chmod 600 ~/.pgpass
# 4. Verify cron: sudo systemctl status cron
#
# IMPORTANT: Set PGPASSWORD environment variable or configure .pgpass file

SHELL=/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
MAILTO=root

# Environment variables for PostgreSQL connection
PGHOST=localhost
PGPORT=5432
PGUSER=agentiq
PGDATABASE=agentiq_chat

# Daily incremental backup at 03:00 UTC
0 3 * * * root /opt/agentiq/scripts/ops/db-backup.sh

# Weekly full backup on Sunday at 02:00 UTC (with --clean --if-exists)
0 2 * * 0 root /opt/agentiq/scripts/ops/db-backup.sh --weekly
